<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Typing Trainer</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            background: linear-gradient(135deg, #f4f4f4, #e0e0e0);
            transition: background 0.3s, color 0.3s;
            margin: 0;
            padding: 0;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .container {
            max-width: 800px;
            width: 100%;
            padding: 20px;
            background: white;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            border-radius: 10px;
            transition: box-shadow 0.3s, border 0.3s;
            border: 2px solid #ddd;
        }
        h1 {
            color: #333;
            margin-bottom: 20px;
        }
        #timer, #stats, #bestScore, #accuracy, #errorCount, #points {
            font-size: 18px;
            margin-top: 10px;
            color: #333;
        }
        #textDisplay {
            font-size: 20px;
            margin-bottom: 10px;
            padding: 10px;
            background: #f8f8f8;
            border-radius: 5px;
            color: #333;
            border: 2px solid #ddd;
        }
        #inputField {
            width: 100%;
            padding: 10px;
            font-size: 18px;
            border: 2px solid #ddd;
            border-radius: 5px;
            outline: none;
            color: #333;
            background: white;
            margin-bottom: 10px;
            transition: border-color 0.3s;
        }
        .night-mode {
            background: linear-gradient(135deg, #1e1e1e, #121212);
            color: white;
        }
        .night-mode .container {
            background: #333;
            box-shadow: 0 0 15px 5px rgba(0, 123, 255, 0.6);
            border: 2px solid #007BFF;
        }
        .night-mode h1, .night-mode #timer, .night-mode #stats,
        .night-mode #bestScore, .night-mode #accuracy, .night-mode #errorCount, .night-mode #points {
            color: white;
        }
        .night-mode #textDisplay {
            background: #444;
            color: white;
            border: 2px solid #007BFF;
        }
        .night-mode #inputField {
            background: #444;
            color: white;
            border: 2px solid #007BFF;
        }
        button {
            padding: 10px 15px;
            margin: 5px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: background 0.3s, border 0.3s;
        }
        .start-btn {
            background: #007BFF;
            color: white;
        }
        .reset-btn {
            background: #DC3545;
            color: white;
        }
        .mode-btn, .difficulty-btn, .language-btn, .login-btn, .signup-btn, .logout-btn, .time-challenge-btn {
            background: #6C757D;
            color: white;
            position: absolute;
            top: 10px;
            padding: 5px 10px;
            font-size: 14px;
        }
        .mode-btn {
            right: 10px;
        }
        .difficulty-btn {
            right: 120px;
        }
        .language-btn {
            right: 230px;
        }
        .login-btn {
            right: 340px;
        }
        .signup-btn {
            right: 450px;
        }
        .logout-btn {
            right: 340px;
            display: none;
        }
        .time-challenge-btn {
            right: 560px;
        }
        .dropdown {
            display: none;
            position: absolute;
            top: 40px;
            background: white;
            border: 1px solid #ddd;
            border-radius: 5px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            z-index: 1;
        }
        .dropdown button {
            display: block;
            width: 100%;
            padding: 10px;
            text-align: left;
            background: white;
            color: #333;
            border: none;
            border-radius: 0;
        }
        .dropdown button:hover {
            background: #f4f4f4;
        }
        .night-mode .dropdown {
            background: #333;
            border-color: #007BFF;
        }
        .night-mode .dropdown button {
            background: #333;
            color: white;
        }
        .night-mode .dropdown button:hover {
            background: #444;
        }
        #loginPopup, #signupPopup {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            z-index: 2;
        }
        #loginPopup input, #signupPopup input {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        #loginPopup button, #signupPopup button {
            width: 100%;
            padding: 10px;
            background: #007BFF;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        .night-mode #loginPopup, .night-mode #signupPopup {
            background: #333;
            border-color: #007BFF;
        }
        .night-mode #loginPopup input, .night-mode #signupPopup input {
            background: #444;
            color: white;
            border-color: #007BFF;
        }
        #progress {
            margin-top: 20px;
            text-align: left;
        }
        #progress h2 {
            font-size: 20px;
            color: #333;
        }
        .night-mode #progress h2 {
            color: white;
        }
        #progress ul {
            list-style-type: none;
            padding: 0;
        }
        #progress li {
            font-size: 16px;
            margin: 5px 0;
            color: #333;
        }
        .night-mode #progress li {
            color: white;
        }
        /* ØªØ°ÙŠÙŠÙ„ Ø§Ù„ØµÙØ­Ø© */
        footer {
            position: fixed;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 14px;
            color: #333;
            text-align: center;
        }
        .night-mode footer {
            color: white;
        }
    </style>
</head>
<body>
    <button class="mode-btn" onclick="toggleNightMode()">ğŸŒ™</button>
    <button class="difficulty-btn" onclick="toggleDropdown('difficultyDropdown')">Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØµØ¹ÙˆØ¨Ø©</button>
    <div class="dropdown" id="difficultyDropdown">
        <button onclick="setDifficulty('easy')">Ø³Ù‡Ù„</button>
        <button onclick="setDifficulty('medium')">Ù…ØªÙˆØ³Ø·</button>
        <button onclick="setDifficulty('hard')">ØµØ¹Ø¨</button>
    </div>
    <button class="language-btn" onclick="toggleDropdown('languageDropdown')">Ø§Ø®ØªØ± Ø§Ù„Ù„ØºØ©</button>
    <div class="dropdown" id="languageDropdown">
        <button onclick="setLanguage('ar')">Ø¹Ø±Ø¨ÙŠ</button>
        <button onclick="setLanguage('en')">English</button>
    </div>
    <button class="login-btn" onclick="showLoginPopup()">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</button>
    <button class="signup-btn" onclick="showSignupPopup()">Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨</button>
    <button class="logout-btn" onclick="logout()">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</button>
    <button class="time-challenge-btn" onclick="startTimeChallenge()">Ø§Ù„ØªØ­Ø¯ÙŠ Ø§Ù„Ø²Ù…Ù†ÙŠ (30 Ø«Ø§Ù†ÙŠØ©)</button>
    <div id="loginPopup">
        <h2>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</h2>
        <input type="text" id="username" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…">
        <input type="password" id="password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
        <button onclick="login()">Ø¯Ø®ÙˆÙ„</button>
    </div>
    <div id="signupPopup">
        <h2>Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨</h2>
        <input type="text" id="signupUsername" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…">
        <input type="email" id="signupEmail" placeholder="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ">
        <input type="password" id="signupPassword" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
        <button onclick="signup()">Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨</button>
    </div>
    <div class="container">
        <h1>Typing Trainer</h1>
        <p id="timer">ÙˆÙ‚Øª Ù…ØªØ¨Ù‚Ù: 60 Ø«Ø§Ù†ÙŠØ©</p>
        <p id="textDisplay"></p>
        <input type="text" id="inputField" disabled>
        <button class="start-btn" onclick="startCountdown()">Ø§Ø¨Ø¯Ø£ Ø§Ù„ØªÙ…Ø±ÙŠÙ†</button>
        <button class="reset-btn" onclick="resetTest()">Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©</button>
        <p id="stats"></p>
        <p id="accuracy"></p>
        <p id="errorCount"></p>
        <p id="bestScore"></p>
        <p id="points">Ø§Ù„Ù†Ù‚Ø§Ø·: 0</p>
        <div id="progress">
            <h2>Ø§Ù„ØªÙ‚Ø¯Ù… Ø§Ù„Ø³Ø§Ø¨Ù‚</h2>
            <ul id="progressList"></ul>
        </div>
    </div>

    <!-- ØªØ°ÙŠÙŠÙ„ Ø§Ù„ØµÙØ­Ø© -->
    <footer>
        ØªÙ… Ø¨Ø±Ù…Ø¬Ø© Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ù…Ù† Ù‚Ø¨Ù„ Ø§Ù„Ù…Ø¨Ø±Ù…Ø¬ ÙØ§Ø±Ø³ Ù‡Ø§Ù†ÙŠ
    </footer>

    <script>
        const textSamples = {
            ar: {
                easy: ["Ù‡Ø°Ø§ Ø§Ø®ØªØ¨Ø§Ø± Ø³Ù‡Ù„"],
                medium: ["ØªØ­Ø³ÙŠÙ† Ø³Ø±Ø¹Ø© Ø§Ù„Ø·Ø¨Ø§Ø¹Ø© ÙŠØ­ØªØ§Ø¬ Ø¥Ù„Ù‰ ØªØ¯Ø±ÙŠØ¨ Ù…Ø³ØªÙ…Ø±"],
                hard: ["Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ÙƒØªØ§Ø¨Ø©ØŒ ÙŠØ¸Ù‡Ø± Ù…Ø¹Ø¯Ù„ Ø§Ù„ÙƒÙ„Ù…Ø§Øª ÙÙŠ Ø§Ù„Ø¯Ù‚ÙŠÙ‚Ø© Ù„Ø­Ø¸ÙŠÙ‹Ø§ Ø¯ÙˆÙ† Ø§Ù†ØªØ¸Ø§Ø± Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±"]
            },
            en: {
                easy: ["This is an easy test"],
                medium: ["Improving typing speed requires continuous practice"],
                hard: ["While typing, the words per minute rate appears instantly without waiting for the end of the test"]
            }
        };
        let startTime, textToType, timerInterval, timeLeft = 60, errors = 0;
        let difficulty = "easy"; // Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ
        let language = "ar"; // Ø§Ù„Ù„ØºØ© Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©
        let isLoggedIn = false; // Ø­Ø§Ù„Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
        let points = 0; // Ø§Ù„Ù†Ù‚Ø§Ø·

        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªÙ‚Ø¯Ù… Ø§Ù„Ø³Ø§Ø¨Ù‚ Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„ØµÙØ­Ø©
        let progress = JSON.parse(localStorage.getItem("progress")) || [];
        document.getElementById("progressList").innerHTML = progress
            .map((result, index) => `<li>${index + 1}: ${result.wpm} WPM (Ø§Ù„Ø¯Ù‚Ø©: ${result.accuracy}%)</li>`)
            .join("");

        function startCountdown() {
            let countdown = 3;
            document.getElementById("timer").textContent = `Ø§Ø¨Ø¯Ø£ Ø®Ù„Ø§Ù„: ${countdown}`;
            let countdownInterval = setInterval(() => {
                countdown--;
                if (countdown > 0) {
                    document.getElementById("timer").textContent = `Ø§Ø¨Ø¯Ø£ Ø®Ù„Ø§Ù„: ${countdown}`;
                } else {
                    clearInterval(countdownInterval);
                    startTest();
                }
            }, 1000);
        }

        function startTest() {
            textToType = textSamples[language][difficulty][Math.floor(Math.random() * textSamples[language][difficulty].length)];
            document.getElementById("textDisplay").textContent = textToType;
            document.getElementById("inputField").value = "";
            document.getElementById("inputField").disabled = false;
            document.getElementById("inputField").style.borderColor = "#ddd";
            document.getElementById("stats").textContent = "";
            document.getElementById("accuracy").textContent = "";
            document.getElementById("errorCount").textContent = "";
            document.getElementById("inputField").focus();
            startTime = new Date().getTime();
            updateTimer();
            clearInterval(timerInterval);
            timerInterval = setInterval(updateTimer, 1000);
        }

        function startTimeChallenge() {
            timeLeft = 30; // ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆÙ‚Øª Ø¥Ù„Ù‰ 30 Ø«Ø§Ù†ÙŠØ©
            startTest();
        }

        function updateTimer() {
            if (timeLeft > 0) {
                timeLeft--;
                document.getElementById("timer").textContent = `ÙˆÙ‚Øª Ù…ØªØ¨Ù‚Ù: ${timeLeft} Ø«Ø§Ù†ÙŠØ©`;
            } else {
                clearInterval(timerInterval);
                document.getElementById("inputField").disabled = true;
                calculateResults();
            }
        }

        document.getElementById("inputField").addEventListener("input", function() {
            const typedText = this.value;
            if (!textToType.startsWith(typedText)) {
                this.style.borderColor = "red";
                errors++;
            } else {
                this.style.borderColor = "#007BFF";
            }

            if (typedText === textToType) {
                clearInterval(timerInterval);
                document.getElementById("inputField").disabled = true;
                calculateResults();
            }
        });

        function calculateResults() {
            const endTime = new Date().getTime();
            const timeTaken = (endTime - startTime) / 1000 / 60;
            const wordsPerMinute = Math.round((textToType.split(" ").length) / timeTaken);
            const accuracy = (100 - (errors / textToType.length) * 100).toFixed(2);
            document.getElementById("stats").textContent = `Ø³Ø±Ø¹Ø© Ø§Ù„ÙƒØªØ§Ø¨Ø©: ${wordsPerMinute} ÙƒÙ„Ù…Ø© ÙÙŠ Ø§Ù„Ø¯Ù‚ÙŠÙ‚Ø©`;
            document.getElementById("accuracy").textContent = `Ø§Ù„Ø¯Ù‚Ø©: ${accuracy}%`;
            document.getElementById("errorCount").textContent = `Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡: ${errors}`;
            updatePoints(wordsPerMinute, accuracy);
            saveBestScore(wordsPerMinute);
            saveProgress(wordsPerMinute, accuracy);
        }

        function updatePoints(wpm, accuracy) {
            points += Math.round(wpm * (accuracy / 100)); // Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ù†Ù‚Ø§Ø· Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ø³Ø±Ø¹Ø© ÙˆØ§Ù„Ø¯Ù‚Ø©
            document.getElementById("points").textContent = `Ø§Ù„Ù†Ù‚Ø§Ø·: ${points}`;
        }

        function saveBestScore(wpm) {
            let bestScore = localStorage.getItem("bestWPM") || 0;
            if (wpm > bestScore) {
                localStorage.setItem("bestWPM", wpm);
                document.getElementById("bestScore").textContent = `ğŸ‰ Ø±Ù‚Ù… Ù‚ÙŠØ§Ø³ÙŠ Ø¬Ø¯ÙŠØ¯: ${wpm} ÙƒÙ„Ù…Ø© ÙÙŠ Ø§Ù„Ø¯Ù‚ÙŠÙ‚Ø©!`;
            }
        }

        function saveProgress(wpm, accuracy) {
            progress.push({ wpm, accuracy });
            localStorage.setItem("progress", JSON.stringify(progress));
            document.getElementById("progressList").innerHTML = progress
                .map((result, index) => `<li>${index + 1}: ${result.wpm} WPM (Ø§Ù„Ø¯Ù‚Ø©: ${result.accuracy}%)</li>`)
                .join("");
        }

        function resetTest() {
            clearInterval(timerInterval);
            document.getElementById("timer").textContent = "ÙˆÙ‚Øª Ù…ØªØ¨Ù‚Ù: 60 Ø«Ø§Ù†ÙŠØ©";
            document.getElementById("textDisplay").textContent = "";
            document.getElementById("inputField").value = "";
            document.getElementById("inputField").disabled = true;
            document.getElementById("stats").textContent = "";
            document.getElementById("accuracy").textContent = "";
            document.getElementById("errorCount").textContent = "";
            document.getElementById("inputField").style.borderColor = "#ddd";
        }

        function toggleNightMode() {
            document.body.classList.toggle("night-mode");
        }

        function toggleDropdown(dropdownId) {
            const dropdown = document.getElementById(dropdownId);
            dropdown.style.display = dropdown.style.display === "block" ? "none" : "block";
        }

        function setDifficulty(level) {
            difficulty = level;
            document.getElementById("difficultyDropdown").style.display = "none";
        }

        function setLanguage(lang) {
            language = lang;
            document.getElementById("languageDropdown").style.display = "none";
        }

        function showLoginPopup() {
            document.getElementById("loginPopup").style.display = "block";
            document.getElementById("signupPopup").style.display = "none";
        }

        function showSignupPopup() {
            document.getElementById("signupPopup").style.display = "block";
            document.getElementById("loginPopup").style.display = "none";
        }

        function login() {
            const username = document.getElementById("username").value;
            const password = document.getElementById("password").value;
            if (username && password) {
                alert(`Ù…Ø±Ø­Ø¨Ù‹Ø§ ${username}! ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ù†Ø¬Ø§Ø­.`);
                document.getElementById("loginPopup").style.display = "none";
                isLoggedIn = true;
                updateLoginButtons();
            } else {
                alert("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙˆÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±.");
            }
        }

        function signup() {
            const username = document.getElementById("signupUsername").value;
            const email = document.getElementById("signupEmail").value;
            const password = document.getElementById("signupPassword").value;
            if (username && email && password) {
                alert(`Ù…Ø±Ø­Ø¨Ù‹Ø§ ${username}! ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨ Ø¨Ù†Ø¬Ø§Ø­.`);
                document.getElementById("signupPopup").style.display = "none";
                isLoggedIn = true;
                updateLoginButtons();
            } else {
                alert("ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„.");
            }
        }

        function logout() {
            isLoggedIn = false;
            updateLoginButtons();
            alert("ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ Ø¨Ù†Ø¬Ø§Ø­.");
        }

        function updateLoginButtons() {
            if (isLoggedIn) {
                document.querySelector(".login-btn").style.display = "none";
                document.querySelector(".signup-btn").style.display = "none";
                document.querySelector(".logout-btn").style.display = "block";
            } else {
                document.querySelector(".login-btn").style.display = "block";
                document.querySelector(".signup-btn").style.display = "block";
                document.querySelector(".logout-btn").style.display = "none";
            }
        }
    </script>
</body>
</html>